module.exports = {
  id: 'scaff-bay-design',
  name: 'Scaffold Bay Design Optimizer',
  description: 'Optimizes scaffold bay configuration for structural efficiency and cost',
  category: 'Structural Integrity',
  module: 'scaffolding',
  icon: 'AppstoreOutlined',
  tags: ['bay', 'design', 'optimization', 'layout', 'structural', 'scaffolding'],
  uiDefinition: [
    { id: 'input-card', type: 'section', title: 'Design Parameters', description: 'Project requirements and constraints', icon: 'FormOutlined', order: 1, size: 24 },
    { id: 'requirements', type: 'group', title: 'Project Requirements', description: 'Basic dimensions', sectionId: 'input-card', order: 1, size: 24 },
    { id: 'total_length_m', type: 'number', title: 'Total length (m)', label: 'Total scaffold length (m)', sectionId: 'input-card', groupId: 'requirements', size: 6, required: true },
    { id: 'required_height_m', type: 'number', title: 'Required height (m)', label: 'Working height required (m)', sectionId: 'input-card', groupId: 'requirements', size: 6, required: true },
    { id: 'scaffold_width_m', type: 'number', title: 'Width (m)', label: 'Scaffold width (m)', sectionId: 'input-card', groupId: 'requirements', size: 6, defaultValue: 1.3 },
    { id: 'working_platforms', type: 'number', title: 'Working platforms', label: 'Number of working platforms', sectionId: 'input-card', groupId: 'requirements', size: 6, defaultValue: 1 },
    { id: 'structure', type: 'group', title: 'Structural Configuration', description: 'Loading and support', sectionId: 'input-card', order: 2, size: 24 },
    { id: 'duty_class', type: 'select', title: 'Duty class', label: 'Loading class', sectionId: 'input-card', groupId: 'structure', size: 6, options: [
      { label: 'Class 1 - Inspection (0.75 kN/m²)', value: 'class1' },
      { label: 'Class 2 - Light (1.50 kN/m²)', value: 'class2' },
      { label: 'Class 3 - General (2.00 kN/m²)', value: 'class3' },
      { label: 'Class 4 - Masonry (3.00 kN/m²)', value: 'class4' },
      { label: 'Class 5 - Heavy (4.50 kN/m²)', value: 'class5' },
      { label: 'Class 6 - Special (6.00 kN/m²)', value: 'class6' }
    ], required: true },
    { id: 'scaffold_type', type: 'select', title: 'Scaffold type', label: 'Scaffold type', sectionId: 'input-card', groupId: 'structure', size: 6, options: [
      { label: 'Independent tied', value: 'independent' },
      { label: 'Putlog/single', value: 'putlog' },
      { label: 'Cantilever', value: 'cantilever' },
      { label: 'Birdcage', value: 'birdcage' }
    ], defaultValue: 'independent' },
    { id: 'building_shape', type: 'select', title: 'Building shape', label: 'Building configuration', sectionId: 'input-card', groupId: 'structure', size: 6, options: [
      { label: 'Straight facade', value: 'straight' },
      { label: 'L-shaped', value: 'l_shaped' },
      { label: 'U-shaped', value: 'u_shaped' },
      { label: 'Circular/curved', value: 'circular' },
      { label: 'Irregular', value: 'irregular' }
    ], defaultValue: 'straight' },
    { id: 'tie_availability', type: 'select', title: 'Tie points', label: 'Tie point availability', sectionId: 'input-card', groupId: 'structure', size: 6, options: [
      { label: 'Abundant', value: 'abundant' },
      { label: 'Regular', value: 'regular' },
      { label: 'Limited', value: 'limited' },
      { label: 'Very limited', value: 'very_limited' }
    ], defaultValue: 'regular' },
    { id: 'materials', type: 'group', title: 'Material Constraints', description: 'Available components', sectionId: 'input-card', order: 3, size: 24 },
    { id: 'tube_lengths', type: 'tags', title: 'Available tubes', label: 'Available tube lengths (m)', sectionId: 'input-card', groupId: 'materials', size: 12, props: { placeholder: 'e.g., 6.0, 4.0, 3.0, 2.4, 1.8' }, defaultValue: ['6.0', '4.0', '3.0', '2.4', '1.8'] },
    { id: 'preferred_bay_length', type: 'select', title: 'Preferred bay', label: 'Preferred bay length', sectionId: 'input-card', groupId: 'materials', size: 6, options: [
      { label: '2.4m (8ft)', value: '2.4' },
      { label: '2.0m (6.5ft)', value: '2.0' },
      { label: '1.8m (6ft)', value: '1.8' },
      { label: '1.5m (5ft)', value: '1.5' },
      { label: '3.0m (10ft)', value: '3.0' }
    ], defaultValue: '2.4' },
    { id: 'lift_height_preference', type: 'select', title: 'Lift height', label: 'Preferred lift height', sectionId: 'input-card', groupId: 'materials', size: 6, options: [
      { label: '2.0m standard', value: '2.0' },
      { label: '1.8m reduced', value: '1.8' },
      { label: '2.2m extended', value: '2.2' },
      { label: '1.5m low', value: '1.5' }
    ], defaultValue: '2.0' },
    { id: 'optimization', type: 'group', title: 'Optimization Goals', description: 'Design priorities', sectionId: 'input-card', order: 4, size: 24, collapsible: true },
    { id: 'optimization_priority', type: 'select', title: 'Priority', label: 'Optimization priority', sectionId: 'input-card', groupId: 'optimization', size: 8, options: [
      { label: 'Minimize material', value: 'min_material' },
      { label: 'Maximize strength', value: 'max_strength' },
      { label: 'Minimize labor', value: 'min_labor' },
      { label: 'Balanced', value: 'balanced' }
    ], defaultValue: 'balanced' },
    { id: 'allow_mixed_bays', type: 'switch', title: 'Mixed bays', label: 'Allow mixed bay sizes', sectionId: 'input-card', groupId: 'optimization', size: 8, defaultValue: false },
    { id: 'include_alternatives', type: 'switch', title: 'Show alternatives', label: 'Show alternative designs', sectionId: 'input-card', groupId: 'optimization', size: 8, defaultValue: true },
    { id: 'units', type: 'group', title: 'Display Units', description: 'Output units', sectionId: 'input-card', order: 5, size: 24, collapsible: true },
    { id: 'length_unit', type: 'select', title: 'Length unit', label: 'Display unit', sectionId: 'input-card', groupId: 'units', size: 8, options: [
      { label: 'Meters (m)', value: 'm' },
      { label: 'Feet (ft)', value: 'ft' },
      { label: 'Both', value: 'both' }
    ], defaultValue: 'm' }
  ],
  aiPrompt: [
    'You are a scaffold bay design optimization specialist.',
    '',
    'Design optimal bay configuration considering structural requirements, material efficiency, and constructability.',
    '',
    'Use:',
    '- Standard bay lengths: 2.4m (most common), 2.0m, 1.8m, 1.5m, 3.0m (heavy duty)',
    '- Bay selection by duty: Light=2.4-3.0m, Medium=2.0-2.4m, Heavy=1.5-2.0m',
    '- Standard lift heights: 2.0m (standard), 1.8m (reduced headroom), 2.2m (tall)',
    '- Number of bays = ceil(Total length / Bay length)',
    '- Number of lifts = ceil(Required height / Lift height) + 1 for guardrail',
    '- Actual height = Lifts × Lift height',
    '- Tie pattern: Regular = every 4m H × 6m L, Limited = every 4m H × 4m L',
    '- Width recommendations: 1.3m (4 boards), 1.0m (3 boards), 0.7m (2 boards)',
    '- Material efficiency: Minimize tube cutting, use standard lengths',
    '- Structural capacity check: Bay moment = wL²/8, where w = duty load',
    '- Bracing bays: Every 5th bay minimum for stability',
    '- Corner/shape adjustments: L-shape needs corner tower, Circular needs short bays',
    '- Labor factor: Fewer larger bays = less connections but heavier lifts',
    '- Mixed bays: Use shorter bays at ends if total/preferred leaves remainder',
    '- Unit conversion: 1m = 3.28084 ft',
    '',
    'Guidelines:',
    '- Calculate optimal bay and lift configuration',
    '- Check structural adequacy',
    '- Optimize for selected priority',
    '- Provide alternatives if requested',
    '',
    'Output ONLY:',
    '# Scaffold Bay Design Optimizer',
    '## Report Summary',
    'One sentence summarizing the scaffold dimensions and optimal configuration.',
    '## Optimal Design',
    '| Parameter | Value | Notes |',
    '| --- | --- | --- |',
    '| **Bay Configuration** | | |',
    '| Number of bays | <value> | <notes> |',
    '| Standard bay length | <value> <unit> | <notes> |',
    '| End bay adjustment | <value> <unit> | If needed |',
    '| Total achieved length | <value> <unit> | vs <required> |',
    '| **Lift Configuration** | | |',
    '| Number of lifts | <value> | Including top guardrail |',
    '| Lift height | <value> <unit> | <standard/custom> |',
    '| Total achieved height | <value> <unit> | vs <required> |',
    '| Working platform height | <value> <unit> | Top platform |',
    '| **Structural Details** | | |',
    '| Scaffold width | <value> <unit> | <boards> boards |',
    '| Tie points required | <value> | Based on <pattern> |',
    '| Braced bays | <value> | Every <interval> bay |',
    '| Platform area | <value> m² | Per platform |',
    '## Material Requirements',
    '| Component | Specification | Quantity | Weight (kg) |',
    '| --- | --- | --- | --- |',
    '| Standards | <length>m tubes | <value> | <value> |',
    '| Ledgers | <length>m tubes | <value> | <value> |',
    '| Transoms | <width>m tubes | <value> | <value> |',
    '| Braces | Diagonal tubes | <value> | <value> |',
    '| Boards | <length>m × 225mm | <value> | <value> |',
    '| **Total weight** | | | **<value> kg** |',
    '## Structural Verification',
    '| Check | Required | Actual | Status |',
    '| --- | --- | --- | --- |',
    '| Bay moment capacity | <value> kN.m | <value> kN.m | ✓/✗ |',
    '| Leg load | < <limit> kN | <value> kN | ✓/✗ |',
    '| Tie capacity | <value> kN | <value> kN | ✓/✗ |',
    '| H/B ratio | < 3:1 | <value>:1 | ✓/✗ |',
    '| Platform loading | <class> kN/m² | Adequate | ✓/✗ |',
    '## Alternative Designs',
    '| Option | Bays | Bay Length | Lifts | Material | Labor | Notes |',
    '| --- | --- | --- | --- | --- | --- | --- |',
    '| Optimal | <value> | <value>m | <value> | 100% | 100% | Recommended |',
    '| Min material | <value> | <value>m | <value> | 95% | 110% | Fewer components |',
    '| Min labor | <value> | <value>m | <value> | 108% | 85% | Faster erection |',
    '| Max strength | <value> | <value>m | <value> | 115% | 105% | Higher capacity |',
    '## Recommendations',
    '1. Bay layout optimization strategy',
    '2. Critical tie point locations',
    '3. Special considerations for building shape',
    '## Calculations',
    '- Bays: <length>m / <bay>m = <value> bays',
    '- Lifts: <height>m / <lift>m = <value> + 1 guardrail',
    '- Bay moment: <duty> kN/m² × <bay>² / 8 = <value> kN.m',
    '- Leg load: <area> × <duty> / <legs> = <value> kN',
    '## Assumptions & Uncertainty',
    '- Standard tube sizes and availability assumed',
    '- Uniform loading distribution',
    '- Tie points at regular intervals',
    '- Confidence level: <value>%',
    '## Escalation Criteria',
    '- If H/B > 3:1, additional ties or buttressing required',
    '- If bay moment > 5 kN.m, reduce bay length',
    '- If irregular shape, detailed design required',
    '## Rationale',
    'Explanation of design choices and optimization approach.',
    '## References and Standards',
    '- EN 12811-1:2003 Facade scaffolds',
    '- BS 5975:2019 Scaffold design',
    '- TG20:21 Design tables',
    '',
    'END OF REPORT'
  ].join('\n')
};


